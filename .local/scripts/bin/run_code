#!/bin/sh


tmp="$(mktemp)"
compile "$1" > "$tmp"
bin_file_read=false

while IFS= read -r line
do
    if ! [ $bin_file_read ]
    then
        BIN_FILE="$line"
        bin_file_read=true
    else
        EXEC_CMD="$line"
    fi
done < "$tmp"

rm "$tmp"

printf "\$ %s\n\n" "$EXEC_CMD"
time $EXEC_CMD ; printf "Press any key to exit..." && wait_key_press

if [ -n "$BIN_FILE" ]
then
    rm "$BIN_FILE"
fi
