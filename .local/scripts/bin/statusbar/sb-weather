#!/bin/sh

n=3
logfile="${XDG_CACHE_HOME:-$HOME/.cache}/weather"
read opt < "$logfile" || opt=0

update_opt () {
	param=$1
	opt=$(( (opt + param) % n ))
	opt=${opt#-}
	echo "$opt" > "$logfile"
}

case $BUTTON in
	1) update_opt 1 ;;
esac

printf "^c#D8DEE9^"
case $opt in
	# 0) curl -sf "wttr.in?format=^v^%c++^cE06C75^^t^+%t" | tr -d '+' | sed -e "s/\^c/\^c#/g" -e "s/☀️/\^c#FEDF00\^/g" -e "s/⛅️/\^c#E5E9F0\^/g" -e "s/☁️/\^c#DCDCDC\^/g" ;;
	# 1) curl -sf "wttr.in?format=^v^^cADD8E6^^t^+%w++^v^^c7DCFFF^^t^+%h++^v^^c88C0D0^^t^+%p" | sed -e "s/\^c/\^c#/g" ;;
	# 2) curl -sf "wttr.in?format=%m+%P" ;;
esac
