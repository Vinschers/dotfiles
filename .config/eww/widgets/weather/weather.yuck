(defvar weather_rev false)

(defwidget weather []
  (custom_widget
    :visible {weather != ""}

    (eventbox
      :onhover "${EWW_CMD} update weather_rev=true"
      :onhoverlost "${EWW_CMD} update weather_rev=false"

      (box
        :class "weather"
        :space-evenly false
        :spacing 6

        (label
          :text "${weather.icon}"
        )

        (label
          :text "${weather.temp} Â°C"
        )

        (revealer
          :transition "slideright"
          :reveal weather_rev
          :duration "350ms"

          (box
            :class "weather-info"
            :space-evenly false
            :spacing 6

            (label
              :text "ğŸ„"
            )

            (label
              :text "${weather.location} -"
            )

            (label
              :text "${weather.desc}:"
            )

            (label
              :class "max-temp"
              :text "ó±¦²"
            )

            (label
              :text "${weather.max} Â°C"
            )

            (label
              :class "feels-temp"
              :text "ó°”"
            )

            (label
              :text "${weather.feels} Â°C"
            )

            (label
              :class "min-temp"
              :text "ó±¦³"
            )

            (label
              :text "${weather.min} Â°C"
            )
          )
        )
      )
    )
  )
)
