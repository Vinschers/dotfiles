{
    "group/music": {
        "orientation": "horizontal",
        "modules": ["image#player", "cava", "wireplumber"]
    },
    "image#player": {
        "exec": "echo \"$HOME/.config/waybar/images/$(r=\"$(playerctl metadata -p playerctld 2>/dev/null)\"; if [ -n \"$r\" ] && echo \"$r\" | grep -q 'spotify'; then echo 'spotify'; elif [ -n \"$r\" ]; then echo 'ytm'; fi)\".png",
        "size": 24,
        "interval": 3,
        "on-click": "$HOME/.config/waybar/scripts/toggle_music_widget.sh"
    },
    "custom/spotify": {
        "format": "{icon} {}",
        "escape": true,
        "return-type": "json",
        "max-length": 40,
        "smooth-scrolling-threshold": 10,
        "exec": "$HOME/.config/waybar/scripts/mediaplayer.py 2> /dev/null",
        "exec-if": "pgrep spotify"
    },
    "cava": {
        "framerate": 60,
        "bars": 16,
        "method": "pipewire",
        "source": "auto",
        "stereo": false,
        "reverse": false,
        "bar_delimiter": 0,
        "monstercat": false,
        "waves": false,
        "noise_reduction": 0.77,
        "sleep_timer": 1,
        "input_delay": 2,
        "format-icons": ["▁", "▂", "▃", "▄", "▅", "▆", "▇", "█"],
        "actions": {
            "on-click-right": "mode"
        },
        "on-click": "$HOME/.config/waybar/scripts/toggle_music_widget.sh"
    },
    "wireplumber": {
        "format": "{icon} {volume}%",
        "format-muted": "",
        "format-icons": ["", "", ""],
        "on-click": "$HOME/.config/waybar/scripts/toggle_music_widget.sh"
    }
}
